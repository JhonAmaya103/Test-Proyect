<form
  [formGroup]="miFormulario"
  (ngSubmit)="submitForm()"
  class="max-w-md mx-auto bg-white shadow-lg rounded-lg p-6 space-y-5"
>

  <h2 class="bg-black text-white p-5 rounded-lg text-lg text-center">
    Busca tu juego
  </h2>

  <!-- Categoría -->
  <select
    formControlName="categoria_juego"
    class="border w-full rounded px-3 py-2"
  >
    <option value="" disabled>Selecciona una categoría</option>
    <option *ngFor="let categoria of categorias" [value]="categoria.id">
      {{ categoria.nombre }}
    </option>
  </select>

  <!-- Nombre -->
  <input
    type="text"
    placeholder="Escribe el nombre del juego"
    formControlName="nombre"
    class="border w-full rounded px-3 py-2"
  />

  <!-- Autocompletado -->
  <ul *ngIf="sugerencias.length > 0"
      class="border rounded shadow bg-white">
    <li *ngFor="let juego of sugerencias"
        (click)="seleccionarJuego(juego)"
        class="px-3 py-2 hover:bg-blue-100 cursor-pointer">
      {{ juego.nombre }}
    </li>
  </ul>

  <button
    type="submit"
    class="w-full bg-blue-600 text-white py-2 rounded"
  >
    Enviar
  </button>

  <!-- Resultado único -->
  <div *ngIf="juegoEncontrado" class="mt-4 p-4 border rounded shadow">
    <h3 class="font-bold text-lg">{{ juegoEncontrado.nombre }}</h3>
    <img [src]="juegoEncontrado.imagen" class="w-40 my-2">
    <p>{{ juegoEncontrado.descripcion }}</p>
  </div>

  <!-- Resultado por categoría -->
  <div *ngIf="!juegoEncontrado && juegosResultado.length > 0" class="mt-4">
    <h3 class="font-bold text-lg">Juegos de la categoría</h3>

    <div *ngFor="let juego of juegosResultado"
         class="p-4 border rounded shadow mt-2">
      <p class="font-semibold">{{ juego.nombre }}</p>
      <img [src]="juego.imagen" class="w-32 my-2">
      <p>{{ juego.descripcion }}</p>
    </div>
  </div>

</form>

<app-detalle [idCategoria]="idCategoria"></app-detalle>
